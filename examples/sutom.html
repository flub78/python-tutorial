<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sutom - Aide √† la r√©solution</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            padding: 10px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px;
        }

        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 20px;
            }
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 20px;
        }

        /* Onglets */
        .tabs {
            display: flex;
            border-bottom: 2px solid #4CAF50;
            margin-bottom: 20px;
            gap: 5px;
        }

        .tab {
            padding: 10px 20px;
            background-color: #e0e0e0;
            border: none;
            cursor: pointer;
            font-size: 16px;
            border-radius: 8px 8px 0 0;
            transition: background-color 0.3s;
        }

        .tab:hover {
            background-color: #d0d0d0;
        }

        .tab.active {
            background-color: #4CAF50;
            color: white;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .tab {
                padding: 8px 12px;
                font-size: 14px;
            }
        }

        .config-section {
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
            background-color: #fafafa;
        }

        .config-section h2 {
            font-size: 18px;
            margin-bottom: 15px;
            color: #555;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: inline-block;
            width: 150px;
            font-weight: bold;
        }

        .form-group input {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .form-group {
                margin-bottom: 10px;
            }
            
            .form-group label {
                display: block;
                width: 100%;
                margin-bottom: 5px;
            }
            
            .form-group input[type="file"] {
                width: 100%;
                font-size: 12px;
            }
        }

        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            width: auto;
        }

        button:hover {
            background-color: #45a049;
        }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        @media (max-width: 768px) {
            button {
                font-size: 14px;
                padding: 8px 16px;
                width: 100%;
            }
        }

        .proposition-section {
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
            background-color: #fafafa;
        }

        .proposition-section h2 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #555;
        }

        .info-text {
            margin-bottom: 15px;
            color: #666;
            font-size: 14px;
        }

        .lettres-container {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .lettre-btn {
            width: 60px;
            height: 60px;
            font-size: 32px;
            font-weight: bold;
            background-color: #e0e0e0;
            border: 3px solid #999;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            color: #333;
        }

        @media (max-width: 768px) {
            .lettres-container {
                gap: 3px;
                margin: 10px 0;
            }
            
            .lettre-btn {
                width: 45px;
                height: 45px;
                font-size: 24px;
                border: 2px solid #999;
            }
        }

        @media (max-width: 480px) {
            .lettre-btn {
                width: 38px;
                height: 38px;
                font-size: 20px;
            }
        }

        .lettre-btn:hover {
            transform: scale(1.05);
        }

        .lettre-btn.bien-placee {
            background-color: #D32F2F;
            color: white;
            border-color: #B71C1C;
        }

        .lettre-btn.mal-placee {
            background-color: #C9B458;
            color: white;
            border-color: #B8A040;
        }

        .lettre-btn.absente {
            background-color: #5B8FDB;
            color: white;
            border-color: #4A7FCA;
        }

        .legende-section {
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 20px;
            background-color: #fafafa;
        }

        .legende-section h2 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #555;
        }

        .legende-container {
            display: flex;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .legende-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .legende-box {
            width: 30px;
            height: 30px;
            border: 2px solid #666;
            border-radius: 4px;
        }

        .legende-help {
            margin-top: 10px;
            font-size: 12px;
            color: #888;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .legende-container {
                gap: 10px;
            }
            
            .legende-item {
                font-size: 14px;
            }
            
            .legende-box {
                width: 25px;
                height: 25px;
            }
            
            .legende-help {
                font-size: 11px;
            }
        }

        .historique-section {
            border: 1px solid #ddd;
            border-radius: 6px;
            padding: 15px;
            background-color: #fafafa;
        }

        .historique-section h2 {
            font-size: 18px;
            margin-bottom: 10px;
            color: #555;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
            font-size: 14px;
        }

        th {
            background-color: #4CAF50;
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }

        td {
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        .lettre-historique {
            display: inline-block;
            padding: 2px 6px;
            margin: 0 1px;
            border-radius: 3px;
            font-weight: bold;
        }

        .lettre-historique.bien-placee {
            background-color: #D32F2F;
            color: white;
        }

        .lettre-historique.mal-placee {
            background-color: #C9B458;
            color: white;
        }

        .lettre-historique.absente {
            background-color: #5B8FDB;
            color: white;
        }

        @media (max-width: 768px) {
            table {
                font-size: 12px;
            }
            
            th, td {
                padding: 8px 4px;
            }
            
            th:nth-child(3), td:nth-child(3) {
                display: none;
            }
            
            .lettre-historique {
                padding: 1px 4px;
                margin: 0;
                font-size: 11px;
            }
        }

        @media (max-width: 480px) {
            table {
                font-size: 11px;
            }
            
            th, td {
                padding: 6px 2px;
            }
        }

        .context-menu {
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            padding: 5px 0;
            z-index: 1000;
            min-width: 180px;
        }

        .context-menu-item {
            padding: 10px 20px;
            cursor: pointer;
        }

        .context-menu-item:hover {
            background-color: #f0f0f0;
        }

        .hidden {
            display: none;
        }

        .message {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .message.error {
            background-color: #ffebee;
            color: #c62828;
            border: 1px solid #ef5350;
        }

        .message.success {
            background-color: #e8f5e9;
            color: #2e7d32;
            border: 1px solid #66bb6a;
        }

        .message.info {
            background-color: #e3f2fd;
            color: #1565c0;
            border: 1px solid #42a5f5;
        }

        /* Styles pour le mode jeu */
        .input-mot {
            padding: 10px;
            font-size: 18px;
            text-transform: uppercase;
            border: 2px solid #ccc;
            border-radius: 4px;
            width: 100%;
            max-width: 300px;
            text-align: center;
        }

        .input-lettres-container {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 20px 0;
        }

        .input-lettre {
            width: 50px;
            height: 50px;
            font-size: 24px;
            font-weight: bold;
            text-transform: uppercase;
            text-align: center;
            border: 2px solid #4CAF50;
            border-radius: 6px;
            padding: 0;
        }

        .input-lettre:focus {
            outline: none;
            border-color: #2E7D32;
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
        }

        .input-lettre:disabled {
            background-color: #D32F2F;
            color: white;
            border-color: #B71C1C;
        }

        @media (max-width: 768px) {
            .input-lettre {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
        }

        .filtre-position {
            width: 40px;
            height: 40px;
            font-size: 18px;
            font-weight: bold;
            text-transform: uppercase;
            text-align: center;
            border: 2px solid #ccc;
            border-radius: 6px;
            padding: 0;
        }

        .filtre-position:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 5px rgba(76, 175, 80, 0.3);
        }

        @media (max-width: 768px) {
            .filtre-position {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
        }

        .tentatives-jeu {
            margin-top: 20px;
        }

        /* Clavier AZERTY */
        .clavier-container {
            margin: 20px auto;
            max-width: 650px;
        }

        .clavier-row {
            display: flex;
            justify-content: center;
            gap: 4px;
            margin-bottom: 6px;
        }

        .touche-clavier {
            min-width: 40px;
            height: 50px;
            padding: 0 8px;
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
            border: 2px solid #999;
            border-radius: 6px;
            background-color: #666;
            color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .touche-clavier:hover:not(:disabled) {
            background-color: #555;
            transform: translateY(-2px);
        }

        .touche-clavier:active:not(:disabled) {
            transform: translateY(0);
        }

        .touche-clavier:disabled {
            background-color: #5B8FDB;
            color: white;
            border-color: #4A7FCA;
            cursor: not-allowed;
            opacity: 0.6;
        }

        .touche-clavier.bien-placee {
            background-color: #D32F2F;
            color: white;
            border-color: #B71C1C;
        }

        .touche-clavier.mal-placee {
            background-color: #C9B458;
            color: white;
            border-color: #B8A040;
        }

        @media (max-width: 768px) {
            .touche-clavier {
                min-width: 30px;
                height: 40px;
                font-size: 14px;
                padding: 0 5px;
            }
        }

        /* Accord√©on */
        .accordion-header {
            background-color: #4CAF50;
            color: white;
            padding: 12px 15px;
            cursor: pointer;
            border: none;
            width: 100%;
            text-align: left;
            font-size: 16px;
            font-weight: bold;
            border-radius: 4px;
            transition: background-color 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .accordion-header:hover {
            background-color: #45a049;
        }

        .accordion-header::after {
            content: '‚ñº';
            font-size: 12px;
            transition: transform 0.3s;
        }

        .accordion-header.active::after {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            padding: 0 15px;
        }

        .accordion-content.active {
            max-height: 200px;
            padding: 15px;
        }

        .tentative-row {
            display: flex;
            justify-content: center;
            gap: 5px;
            margin: 10px 0;
        }

        .tentative-groupe {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
        }

        .tentative-numero {
            font-size: 18px;
            font-weight: bold;
            color: #4CAF50;
            min-width: 30px;
            text-align: center;
        }

        .lettre-jeu {
            width: 50px;
            height: 50px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: bold;
            border-radius: 6px;
            border: 2px solid #999;
        }

        @media (max-width: 768px) {
            .lettre-jeu {
                width: 40px;
                height: 40px;
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Sutom pour les marcheurs fatigu√©s</h1>

        <!-- Section commune de chargement du dictionnaire -->
        <div class="config-section" id="fichierDicoSection">
            <button class="accordion-header" onclick="toggleAccordion()">
                <span>Dictionnaire</span>
            </button>
            <div class="accordion-content" id="accordionContent">
                <div style="margin-top: 10px;">
                    <span style="color: #666; font-size: 14px; display: block; margin-bottom: 10px;" id="dicoStatus">Chargement du dictionnaire...</span>
                    <div class="form-group">
                        <label for="fichierDico">Charger un autre fichier:</label>
                        <input type="file" id="fichierDico" accept=".txt" onchange="chargerFichierDictionnaire()">
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglets -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('aide')">Aide √† la r√©solution</button>
            <button class="tab" onclick="switchTab('jeu')">Jouer</button>
            <button class="tab" onclick="switchTab('dico')">Dictionnaire</button>
        </div>

        <!-- Onglet Aide -->
        <div id="aide-tab" class="tab-content active">
        <!-- Section Configuration -->
        <div class="config-section">
            <h2>Configuration</h2>
            <div class="form-group">
                <label for="premiereLettre">Premi√®re lettre:</label>
                <input type="text" id="premiereLettre" maxlength="1" style="width: 50px; text-transform: uppercase;">
            </div>
            <div class="form-group">
                <label for="nombreLettres">Nombre de lettres:</label>
                <input type="number" id="nombreLettres" min="3" max="15" value="6" style="width: 80px;">
            </div>
            <div class="form-group">
                <button onclick="demarrer()">D√©marrer</button>
            </div>
            <div id="configMessage"></div>
        </div>

        <!-- Section Proposition -->
        <div class="proposition-section hidden" id="propositionSection">
            <h2>Proposition actuelle</h2>
            <div class="info-text" id="infoText"></div>
            <div style="text-align: center; margin-bottom: 10px; color: #666; font-size: 14px; font-style: italic;">
                Cliquez sur chaque lettre pour indiquer son √©tat (bien plac√©e, mal plac√©e, absente)
            </div>
            <div class="lettres-container" id="lettresContainer"></div>
            <div style="text-align: center;">
                <button onclick="validerReponse()" id="validerBtn">Valider et continuer</button>
            </div>
        </div>

        <!-- Section L√©gende -->
        <div class="legende-section">
            <h2>L√©gende</h2>
            <div class="legende-container">
                <div class="legende-item">
                    <div class="legende-box" style="background-color: #D32F2F;"></div>
                    <span>Bien plac√©e (=)</span>
                </div>
                <div class="legende-item">
                    <div class="legende-box" style="background-color: #C9B458;"></div>
                    <span>Mal plac√©e (?)</span>
                </div>
                <div class="legende-item">
                    <div class="legende-box" style="background-color: #5B8FDB;"></div>
                    <span>Absente (_)</span>
                </div>
            </div>
        </div>

        <!-- Section Historique -->
        <div class="historique-section">
            <h2>Historique des propositions</h2>
            <table>
                <thead>
                    <tr>
                        <th>Essai</th>
                        <th>Mot</th>
                        <th>Candidats restants</th>
                    </tr>
                </thead>
                <tbody id="historiqueBody">
                </tbody>
            </table>
        </div>
        </div>

        <!-- Onglet Jeu -->
        <div id="jeu-tab" class="tab-content">
            <div class="config-section">
                <h2>Configuration du jeu</h2>
                <div class="form-group">
                    <label for="nombreLettresJeu">Nombre de lettres:</label>
                    <input type="number" id="nombreLettresJeu" min="3" max="15" value="6" style="width: 80px;">
                </div>
                <div class="form-group">
                    <button onclick="demarrerJeu()">Nouvelle partie</button>
                </div>
                <div id="jeuMessage"></div>
            </div>

            <div class="proposition-section hidden" id="jeuSection">
                <h2>Tentez de deviner le mot</h2>
                <div class="info-text" id="jeuInfo"></div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <div class="input-lettres-container" id="inputLettresContainer"></div>
                    <br>
                    <button onclick="soumettreMotJeu()">Valider</button>
                </div>

                <!-- Clavier AZERTY -->
                <div class="clavier-container" id="clavierJeu">
                    <div class="clavier-row">
                        <button class="touche-clavier" onclick="ajouterLettreJeu('A')">A</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('Z')">Z</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('E')">E</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('R')">R</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('T')">T</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('Y')">Y</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('U')">U</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('I')">I</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('O')">O</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('P')">P</button>
                    </div>
                    <div class="clavier-row">
                        <button class="touche-clavier" onclick="ajouterLettreJeu('Q')">Q</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('S')">S</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('D')">D</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('F')">F</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('G')">G</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('H')">H</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('J')">J</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('K')">K</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('L')">L</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('M')">M</button>
                    </div>
                    <div class="clavier-row">
                        <button class="touche-clavier" onclick="ajouterLettreJeu('W')">W</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('X')">X</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('C')">C</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('V')">V</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('B')">B</button>
                        <button class="touche-clavier" onclick="ajouterLettreJeu('N')">N</button>
                        <button class="touche-clavier" onclick="effacerLettreJeu()" style="min-width: 80px;">‚å´</button>
                    </div>
                </div>

                <div class="tentatives-jeu" id="tentativesJeu"></div>
            </div>

            <div class="legende-section">
                <h2>L√©gende</h2>
                <div class="legende-container">
                    <div class="legende-item">
                        <div class="legende-box" style="background-color: #D32F2F;"></div>
                        <span>Bien plac√©e</span>
                    </div>
                    <div class="legende-item">
                        <div class="legende-box" style="background-color: #C9B458;"></div>
                        <span>Mal plac√©e</span>
                    </div>
                    <div class="legende-item">
                        <div class="legende-box" style="background-color: #5B8FDB;"></div>
                        <span>Absente</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Onglet Dictionnaire -->
        <div id="dico-tab" class="tab-content">
            <div class="config-section">
                <h2>Filtres</h2>
                <div class="form-group">
                    <label for="longueurDico">Longueur des mots (0 = toutes):</label>
                    <input type="number" id="longueurDico" min="0" max="15" value="0" onchange="changerLongueurDico()" style="width: 80px; padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                </div>
                <div id="filtreMotsContainer" style="display: none; margin: 15px 0;">
                    <label style="font-weight: bold; margin-bottom: 10px; display: block;">Filtrer par lettres :</label>
                    <p style="font-size: 14px; color: #666; margin-bottom: 10px;">Ex: A en seconde colonne s√©lectionne les mots dont la seconde lettre est un A</p>
                    <div class="input-lettres-container" id="filtreLettresContainer"></div>
                    <button onclick="reinitialiserFiltreDico()" style="margin-top: 10px;">R√©initialiser</button>
                </div>
                <div style="margin: 15px 0;">
                    <label style="font-weight: bold; margin-bottom: 10px; display: block;">Lettres interdites :</label>
                    <p style="font-size: 14px; color: #666; margin-bottom: 10px;">Cochez les lettres qui ne doivent pas appara√Ætre dans les mots</p>
                    <div id="lettresInterdites" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(40px, 1fr)); gap: 5px; max-width: 600px;"></div>
                </div>
                <div style="margin: 15px 0;">
                    <label style="font-weight: bold; margin-bottom: 10px; display: block;">Lettres obligatoires :</label>
                    <p style="font-size: 14px; color: #666; margin-bottom: 10px;">Cochez les lettres qui doivent appara√Ætre dans les mots</p>
                    <div id="lettresObligatoires" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(40px, 1fr)); gap: 5px; max-width: 600px;"></div>
                </div>
                <div style="margin-top: 10px; font-weight: bold; color: #4CAF50;" id="compteurMots"></div>
            </div>

            <div class="config-section">
                <h2>Mots du dictionnaire</h2>
                <textarea id="affichageDico" 
                          readonly 
                          style="width: 100%; height: 400px; font-family: monospace; font-size: 14px; padding: 10px; border: 1px solid #ccc; border-radius: 4px; resize: vertical;">
                </textarea>
            </div>
        </div>
    </div>

    <!-- Menu contextuel -->
    <div id="contextMenu" class="context-menu hidden">
        <div class="context-menu-item" onclick="setEtat(currentLettreIndex, '=')">‚úì Bien plac√©e (=)</div>
        <div class="context-menu-item" onclick="setEtat(currentLettreIndex, '?')">? Mal plac√©e (?)</div>
        <div class="context-menu-item" onclick="setEtat(currentLettreIndex, '_')">‚úó Absente (_)</div>
    </div>

    <script>
        // Variables globales pour l'aide
        let dictionnaire = [];
        let candidats = [];
        let essai = 0;
        let motActuel = '';
        let reponseActuelle = [];
        let currentLettreIndex = -1;
        let lettresConnues = {}; // Pour m√©moriser les lettres bien plac√©es

        // Variables globales pour le jeu
        let motSecret = '';
        let tentativesJeu = 0;
        let maxTentatives = 6;
        let partieTerminee = false;

        // Variables globales pour le dictionnaire
        let longueurDicoSelectionnee = 0;
        let filtresDico = [];
        let longueurMaxDico = 0;
        let lettresInterdites = new Set();
        let lettresObligatoires = new Set();

        // Gestion des onglets
        function switchTab(tabName) {
            // Masquer tous les contenus
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // D√©sactiver tous les onglets
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Activer l'onglet s√©lectionn√©
            if (tabName === 'aide') {
                document.getElementById('aide-tab').classList.add('active');
                document.querySelectorAll('.tab')[0].classList.add('active');
            } else if (tabName === 'jeu') {
                document.getElementById('jeu-tab').classList.add('active');
                document.querySelectorAll('.tab')[1].classList.add('active');
            } else if (tabName === 'dico') {
                document.getElementById('dico-tab').classList.add('active');
                document.querySelectorAll('.tab')[2].classList.add('active');
                afficherDictionnaire();
            }
        }

        // Gestion de l'accord√©on
        function toggleAccordion() {
            const header = document.querySelector('.accordion-header');
            const content = document.getElementById('accordionContent');
            
            header.classList.toggle('active');
            content.classList.toggle('active');
        }

        // Essayer de charger le dictionnaire par d√©faut au d√©marrage
        window.addEventListener('DOMContentLoaded', function() {
            // Cr√©er les checkboxes pour les lettres interdites
            creerCheckboxesLettresInterdites();
            // Cr√©er les checkboxes pour les lettres obligatoires
            creerCheckboxesLettresObligatoires();
            
            fetch('dico.txt')
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Fichier non trouv√©');
                    }
                    return response.text();
                })
                .then(data => {
                    dictionnaire = data.split('\n')
                        .map(mot => mot.trim().toUpperCase())
                        .filter(mot => mot.length > 0);
                    calculerLongueurMaxDico();
                    afficherDictionnaire();
                    document.getElementById('dicoStatus').textContent = `‚úì Dictionnaire charg√©: ${dictionnaire.length} mots`;
                    document.getElementById('dicoStatus').style.color = '#2e7d32';
                    console.log(`Dictionnaire par d√©faut charg√©: ${dictionnaire.length} mots`);
                })
                .catch(error => {
                    document.getElementById('dicoStatus').textContent = 'Veuillez charger un fichier dictionnaire';
                    document.getElementById('dicoStatus').style.color = '#c62828';
                    console.log('Pas de dictionnaire par d√©faut, utilisateur devra en charger un');
                });
        });

        // Charger le fichier dictionnaire s√©lectionn√©
        function chargerFichierDictionnaire() {
            const fileInput = document.getElementById('fichierDico');
            const file = fileInput.files[0];
            
            if (!file) {
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                const content = e.target.result;
                dictionnaire = content.split('\n')
                    .map(mot => mot.trim().toUpperCase())
                    .filter(mot => mot.length > 0);
                calculerLongueurMaxDico();
                afficherDictionnaire();
                document.getElementById('dicoStatus').textContent = `‚úì Dictionnaire charg√©: ${dictionnaire.length} mots`;
                document.getElementById('dicoStatus').style.color = '#2e7d32';
                console.log(`Dictionnaire charg√©: ${dictionnaire.length} mots`);
            };
            reader.onerror = function() {
                document.getElementById('dicoStatus').textContent = 'Erreur lors de la lecture du fichier';
                document.getElementById('dicoStatus').style.color = '#c62828';
            };
            reader.readAsText(file, 'UTF-8');
        }

        // Charger dictionnaire selon crit√®res
        function chargerDictionnaire(premiereLettre, longueur) {
            return dictionnaire.filter(mot => 
                mot.length === longueur && mot[0] === premiereLettre
            );
        }

        // G√©n√©rer le pattern de r√©ponse
        function genererPattern(motTest, motSolution) {
            let pattern = Array(motTest.length).fill('_');
            let lettresSolution = motSolution.split('');

            // D'abord les bien plac√©es
            for (let i = 0; i < motTest.length; i++) {
                if (motTest[i] === motSolution[i]) {
                    pattern[i] = '=';
                    lettresSolution[i] = null;
                }
            }

            // Puis les mal plac√©es
            for (let i = 0; i < motTest.length; i++) {
                if (pattern[i] === '_' && lettresSolution.includes(motTest[i])) {
                    pattern[i] = '?';
                    lettresSolution[lettresSolution.indexOf(motTest[i])] = null;
                }
            }

            return pattern.join('');
        }

        // Calculer l'entropie
        function calculerEntropie(motTest, candidats) {
            let partitions = {};
            
            candidats.forEach(candidat => {
                let pattern = genererPattern(motTest, candidat);
                if (!partitions[pattern]) {
                    partitions[pattern] = [];
                }
                partitions[pattern].push(candidat);
            });

            let entropie = 0;
            let n = candidats.length;

            Object.values(partitions).forEach(groupe => {
                let p = groupe.length / n;
                if (p > 0) {
                    entropie -= p * Math.log2(p);
                }
            });

            return entropie;
        }

        // Trouver le meilleur mot
        function meilleurMot(candidats) {
            if (candidats.length === 1) {
                return candidats[0];
            }

            let meilleur = null;
            let maxEntropie = -1;

            candidats.forEach(mot => {
                let entropie = calculerEntropie(mot, candidats);
                if (entropie > maxEntropie) {
                    maxEntropie = entropie;
                    meilleur = mot;
                }
            });

            return meilleur;
        }

        // Filtrer les candidats
        function filtrerCandidats(candidats, motTest, reponse) {
            return candidats.filter(candidat => 
                genererPattern(motTest, candidat) === reponse
            );
        }

        // D√©marrer une nouvelle partie
        function demarrer() {
            if (dictionnaire.length === 0) {
                showMessage('configMessage', 'Veuillez d\'abord charger un fichier dictionnaire ou attendre le chargement du dictionnaire par d√©faut', 'error');
                return;
            }

            let premiereLettre = document.getElementById('premiereLettre').value.trim().toUpperCase();
            let nombreLettres = parseInt(document.getElementById('nombreLettres').value);

            if (!premiereLettre || premiereLettre.length !== 1) {
                showMessage('configMessage', 'Veuillez entrer une seule lettre', 'error');
                return;
            }

            if (!nombreLettres || nombreLettres < 3 || nombreLettres > 15) {
                showMessage('configMessage', 'Veuillez entrer un nombre de lettres valide (3-15)', 'error');
                return;
            }

            candidats = chargerDictionnaire(premiereLettre, nombreLettres);

            if (candidats.length === 0) {
                showMessage('configMessage', 'Aucun mot trouv√© avec ces crit√®res', 'error');
                return;
            }

            showMessage('configMessage', `${candidats.length} mots possibles trouv√©s`, 'success');

            // R√©initialiser
            essai = 0;
            lettresConnues = {}; // R√©initialiser les lettres connues
            document.getElementById('historiqueBody').innerHTML = '';
            document.getElementById('propositionSection').classList.remove('hidden');

            proposerMot();
        }

        // Proposer un nouveau mot
        function proposerMot() {
            if (candidats.length === 0) {
                showMessage('configMessage', 'Aucun mot ne correspond aux r√©ponses donn√©es', 'info');
                return;
            }

            essai++;
            motActuel = meilleurMot(candidats);
            reponseActuelle = Array(motActuel.length).fill('_');

            // Pr√©-remplir avec les lettres connues
            for (let pos in lettresConnues) {
                let index = parseInt(pos);
                if (motActuel[index] === lettresConnues[pos]) {
                    reponseActuelle[index] = '=';
                }
            }

            document.getElementById('infoText').textContent = 
                `Essai ${essai} - ${candidats.length} candidat(s) restant(s)`;

            // Afficher les lettres
            let container = document.getElementById('lettresContainer');
            container.innerHTML = '';

            for (let i = 0; i < motActuel.length; i++) {
                let btn = document.createElement('button');
                btn.className = 'lettre-btn';
                btn.textContent = motActuel[i];
                btn.onclick = () => cycleEtat(i);
                btn.oncontextmenu = (e) => {
                    e.preventDefault();
                    afficherMenu(e, i);
                };
                
                // Appliquer la couleur par d√©faut si lettre connue
                if (reponseActuelle[i] === '=') {
                    btn.classList.add('bien-placee');
                }
                
                container.appendChild(btn);
            }
        }

        // Changer l'√©tat d'une lettre (cycle)
        function cycleEtat(index) {
            let etats = ['_', '?', '='];
            let etatActuel = reponseActuelle[index];
            let nouvelEtat = etats[(etats.indexOf(etatActuel) + 1) % 3];
            setEtat(index, nouvelEtat);
        }

        // D√©finir l'√©tat d'une lettre
        function setEtat(index, etat) {
            reponseActuelle[index] = etat;
            
            let btn = document.getElementById('lettresContainer').children[index];
            btn.className = 'lettre-btn';
            
            if (etat === '=') {
                btn.classList.add('bien-placee');
            } else if (etat === '?') {
                btn.classList.add('mal-placee');
            } else if (etat === '_') {
                btn.classList.add('absente');
            }

            document.getElementById('contextMenu').classList.add('hidden');
        }

        // Afficher le menu contextuel
        function afficherMenu(event, index) {
            currentLettreIndex = index;
            let menu = document.getElementById('contextMenu');
            menu.style.left = event.pageX + 'px';
            menu.style.top = event.pageY + 'px';
            menu.classList.remove('hidden');
        }

        // Cacher le menu contextuel au clic ailleurs
        document.addEventListener('click', () => {
            document.getElementById('contextMenu').classList.add('hidden');
        });

        // Valider la r√©ponse
        function validerReponse() {
            let reponse = reponseActuelle.join('');

            // M√©moriser les lettres bien plac√©es
            for (let i = 0; i < motActuel.length; i++) {
                if (reponseActuelle[i] === '=') {
                    lettresConnues[i] = motActuel[i];
                }
            }

            // Cr√©er l'affichage du mot avec les couleurs
            let motColore = '';
            for (let i = 0; i < motActuel.length; i++) {
                let classe = '';
                if (reponseActuelle[i] === '=') {
                    classe = 'bien-placee';
                } else if (reponseActuelle[i] === '?') {
                    classe = 'mal-placee';
                } else {
                    classe = 'absente';
                }
                motColore += `<span class="lettre-historique ${classe}">${motActuel[i]}</span>`;
            }

            // Ajouter √† l'historique
            let tbody = document.getElementById('historiqueBody');
            let row = tbody.insertRow();
            row.insertCell(0).textContent = essai;
            row.insertCell(1).innerHTML = motColore;
            row.insertCell(2).textContent = candidats.length;

            // V√©rifier si gagn√©
            if (reponse === '='.repeat(motActuel.length)) {
                showMessage('configMessage', `üéâ Mot trouv√© en ${essai} essai(s): ${motActuel}`, 'success');
                document.getElementById('propositionSection').classList.add('hidden');
                return;
            }

            // Filtrer les candidats
            candidats = filtrerCandidats(candidats, motActuel, reponse);

            if (candidats.length === 0) {
                showMessage('configMessage', 'Aucun mot ne correspond. V√©rifiez vos r√©ponses.', 'error');
                document.getElementById('propositionSection').classList.add('hidden');
                return;
            }

            // Proposer le mot suivant
            proposerMot();
        }

        // Afficher un message
        function showMessage(elementId, message, type) {
            let element = document.getElementById(elementId);
            element.innerHTML = `<div class="message ${type}">${message}</div>`;
        }

        // ===== FONCTIONS POUR LE MODE JEU =====

        // D√©marrer une nouvelle partie
        function demarrerJeu() {
            if (dictionnaire.length === 0) {
                showMessage('jeuMessage', 'Veuillez d\'abord charger un dictionnaire ou attendre son chargement', 'error');
                return;
            }

            let longueur = parseInt(document.getElementById('nombreLettresJeu').value);
            if (!longueur || longueur < 3 || longueur > 15) {
                showMessage('jeuMessage', 'Veuillez entrer un nombre de lettres valide (3-15)', 'error');
                return;
            }

            // Filtrer les mots de la bonne longueur
            let motsDisponibles = dictionnaire.filter(mot => mot.length === longueur);
            
            if (motsDisponibles.length === 0) {
                showMessage('jeuMessage', 'Aucun mot de cette longueur dans le dictionnaire', 'error');
                return;
            }

            // Choisir un mot au hasard
            motSecret = motsDisponibles[Math.floor(Math.random() * motsDisponibles.length)];
            tentativesJeu = 0;
            partieTerminee = false;

            // R√©initialiser l'interface
            document.getElementById('tentativesJeu').innerHTML = '';
            document.getElementById('jeuSection').classList.remove('hidden');
            
            // R√©initialiser le clavier
            reinitialiserClavier();
            
            // Cr√©er les champs de saisie
            creerChampsLettres(longueur);
            
            updateJeuInfo();
            showMessage('jeuMessage', `Partie d√©marr√©e ! Trouvez le mot de ${longueur} lettres commen√ßant par ${motSecret[0]}`, 'success');
            
            console.log('Mot secret:', motSecret); // Pour debug
        }

        // Cr√©er les champs de saisie pour les lettres
        function creerChampsLettres(longueur) {
            let container = document.getElementById('inputLettresContainer');
            container.innerHTML = '';
            
            for (let i = 0; i < longueur; i++) {
                let input = document.createElement('input');
                input.type = 'text';
                input.maxLength = 1;
                input.className = 'input-lettre';
                input.id = `lettre-${i}`;
                
                // Premi√®re lettre pr√©-remplie et d√©sactiv√©e
                if (i === 0) {
                    input.value = motSecret[0];
                    input.disabled = true;
                }
                
                // Navigation automatique entre les champs
                input.addEventListener('input', function(e) {
                    if (this.value.length === 1 && i < longueur - 1) {
                        document.getElementById(`lettre-${i + 1}`).focus();
                    }
                });
                
                // Retour arri√®re
                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && this.value === '' && i > 0) {
                        document.getElementById(`lettre-${i - 1}`).focus();
                    }
                    if (e.key === 'Enter') {
                        soumettreMotJeu();
                    }
                });
                
                container.appendChild(input);
            }
            
            // Focus sur le deuxi√®me champ
            if (longueur > 1) {
                document.getElementById('lettre-1').focus();
            }
        }

        // Mettre √† jour les infos du jeu
        function updateJeuInfo() {
            document.getElementById('jeuInfo').textContent = 
                `Tentative ${tentativesJeu + 1}/${maxTentatives} - Mot de ${motSecret.length} lettres commen√ßant par ${motSecret[0]}`;
        }

        // Soumettre un mot
        function soumettreMotJeu() {
            if (partieTerminee) {
                return;
            }

            // R√©cup√©rer le mot depuis les champs
            let motPropose = '';
            for (let i = 0; i < motSecret.length; i++) {
                let input = document.getElementById(`lettre-${i}`);
                motPropose += (input.value || '').toUpperCase();
            }
            
            // Validations
            if (motPropose.length !== motSecret.length) {
                showMessage('jeuMessage', `Le mot doit contenir exactement ${motSecret.length} lettres`, 'error');
                return;
            }

            if (motPropose[0] !== motSecret[0]) {
                showMessage('jeuMessage', `Le mot doit commencer par ${motSecret[0]}`, 'error');
                return;
            }

            if (!dictionnaire.includes(motPropose)) {
                showMessage('jeuMessage', 'Ce mot n\'est pas dans le dictionnaire', 'error');
                return;
            }

            // Traiter la tentative
            tentativesJeu++;
            afficherTentativeJeu(motPropose);
            
            // V√©rifier si gagn√©
            if (motPropose === motSecret) {
                partieTerminee = true;
                showMessage('jeuMessage', `üéâ Bravo ! Vous avez trouv√© le mot "${motSecret}" en ${tentativesJeu} tentative(s) !`, 'success');
                desactiverChampsLettres();
                return;
            }

            // V√©rifier si perdu
            if (tentativesJeu >= maxTentatives) {
                partieTerminee = true;
                showMessage('jeuMessage', `üòû Perdu ! Le mot √©tait "${motSecret}"`, 'error');
                desactiverChampsLettres();
                return;
            }

            // Continuer
            viderChampsLettres();
            updateJeuInfo();
            showMessage('jeuMessage', '', 'info');
        }

        // Vider les champs de lettres (sauf le premier)
        function viderChampsLettres() {
            for (let i = 1; i < motSecret.length; i++) {
                document.getElementById(`lettre-${i}`).value = '';
            }
            document.getElementById('lettre-1').focus();
        }

        // D√©sactiver les champs de lettres
        function desactiverChampsLettres() {
            for (let i = 0; i < motSecret.length; i++) {
                document.getElementById(`lettre-${i}`).disabled = true;
            }
        }

        // Afficher une tentative
        function afficherTentativeJeu(motPropose) {
            let pattern = genererPattern(motPropose, motSecret);
            
            // Cr√©er le conteneur du groupe
            let groupeDiv = document.createElement('div');
            groupeDiv.className = 'tentative-groupe';
            
            // Ajouter le num√©ro de tentative
            let numeroDiv = document.createElement('div');
            numeroDiv.className = 'tentative-numero';
            numeroDiv.textContent = tentativesJeu;
            groupeDiv.appendChild(numeroDiv);
            
            // Cr√©er la rang√©e de lettres
            let tentativeDiv = document.createElement('div');
            tentativeDiv.className = 'tentative-row';
            tentativeDiv.style.margin = '0'; // R√©initialiser la marge car elle est g√©r√©e par le groupe
            
            for (let i = 0; i < motPropose.length; i++) {
                let lettreDiv = document.createElement('div');
                lettreDiv.className = 'lettre-jeu';
                lettreDiv.textContent = motPropose[i];
                
                if (pattern[i] === '=') {
                    lettreDiv.style.backgroundColor = '#D32F2F';
                    lettreDiv.style.color = 'white';
                    lettreDiv.style.borderColor = '#B71C1C';
                } else if (pattern[i] === '?') {
                    lettreDiv.style.backgroundColor = '#C9B458';
                    lettreDiv.style.color = 'white';
                    lettreDiv.style.borderColor = '#B8A040';
                } else {
                    lettreDiv.style.backgroundColor = '#5B8FDB';
                    lettreDiv.style.color = 'white';
                    lettreDiv.style.borderColor = '#4A7FCA';
                }
                
                tentativeDiv.appendChild(lettreDiv);
            }
            
            groupeDiv.appendChild(tentativeDiv);
            document.getElementById('tentativesJeu').appendChild(groupeDiv);
            
            // Mettre √† jour l'√©tat du clavier
            mettreAJourClavier(motPropose, pattern);
        }

        // Fonction pour ajouter une lettre depuis le clavier
        function ajouterLettreJeu(lettre) {
            if (partieTerminee) {
                return;
            }

            // Trouver le premier champ vide (en sautant le premier qui est d√©sactiv√©)
            for (let i = 1; i < motSecret.length; i++) {
                let input = document.getElementById(`lettre-${i}`);
                if (!input.value) {
                    input.value = lettre;
                    // Passer au champ suivant si possible
                    if (i + 1 < motSecret.length) {
                        document.getElementById(`lettre-${i + 1}`).focus();
                    }
                    return;
                }
            }
        }

        // Fonction pour effacer la derni√®re lettre saisie
        function effacerLettreJeu() {
            if (partieTerminee) {
                return;
            }

            // Trouver le dernier champ rempli (en partant de la fin, sauf le premier)
            for (let i = motSecret.length - 1; i >= 1; i--) {
                let input = document.getElementById(`lettre-${i}`);
                if (input.value) {
                    input.value = '';
                    input.focus();
                    return;
                }
            }
        }

        // Fonction pour mettre √† jour l'√©tat des touches du clavier
        function mettreAJourClavier(motPropose, pattern) {
            for (let i = 0; i < motPropose.length; i++) {
                let lettre = motPropose[i];
                let bouton = document.querySelector(`.touche-clavier[onclick="ajouterLettreJeu('${lettre}')"]`);
                
                if (bouton) {
                    if (pattern[i] === '=') {
                        // Bien plac√©e - rouge (priorit√© la plus haute)
                        bouton.classList.remove('mal-placee');
                        bouton.classList.add('bien-placee');
                    } else if (pattern[i] === '?' && !bouton.classList.contains('bien-placee')) {
                        // Mal plac√©e - jaune (seulement si pas d√©j√† bien plac√©e)
                        bouton.classList.add('mal-placee');
                    } else if (pattern[i] === '_' && !bouton.classList.contains('bien-placee') && !bouton.classList.contains('mal-placee')) {
                        // Absente - d√©sactiver
                        bouton.disabled = true;
                    }
                }
            }
        }

        // Fonction pour r√©initialiser le clavier
        function reinitialiserClavier() {
            document.querySelectorAll('.touche-clavier').forEach(bouton => {
                bouton.disabled = false;
                bouton.classList.remove('bien-placee', 'mal-placee');
            });
        }

        // Fonction pour calculer la longueur maximale des mots du dictionnaire
        function calculerLongueurMaxDico() {
            if (dictionnaire.length === 0) {
                longueurMaxDico = 15; // Valeur par d√©faut
                return;
            }
            // Utiliser une boucle pour √©viter le d√©passement de pile avec spread operator
            longueurMaxDico = 0;
            for (let mot of dictionnaire) {
                if (mot.length > longueurMaxDico) {
                    longueurMaxDico = mot.length;
                }
            }
            document.getElementById('longueurDico').max = longueurMaxDico;
            console.log(`Longueur maximale du dictionnaire: ${longueurMaxDico}`);
        }

        // Fonction pour changer la longueur du dictionnaire √† afficher
        function changerLongueurDico() {
            let select = document.getElementById('longueurDico');
            longueurDicoSelectionnee = parseInt(select.value);
            
            let filtresContainer = document.getElementById('filtreLettresContainer');
            let filtresSection = document.getElementById('filtreMotsContainer');
            filtresContainer.innerHTML = '';
            
            if (longueurDicoSelectionnee > 0) {
                filtresSection.style.display = 'block';
                for (let i = 0; i < longueurDicoSelectionnee; i++) {
                    let input = document.createElement('input');
                    input.type = 'text';
                    input.maxLength = 1;
                    input.className = 'filtre-position';
                    input.placeholder = '';
                    input.dataset.position = i;
                    
                    input.addEventListener('input', function() {
                        let val = this.value.toUpperCase();
                        this.value = val;
                        if (val) {
                            filtresDico[i] = val;
                        } else {
                            filtresDico[i] = '';
                        }
                        afficherDictionnaire();
                    });
                    
                    filtresContainer.appendChild(input);
                }
                filtresDico = new Array(longueurDicoSelectionnee).fill('');
            } else {
                filtresSection.style.display = 'none';
                filtresDico = [];
            }
            
            afficherDictionnaire();
        }

        // Fonction pour cr√©er les checkboxes des lettres interdites
        function creerCheckboxesLettresInterdites() {
            const container = document.getElementById('lettresInterdites');
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            
            for (let lettre of alphabet) {
                const label = document.createElement('label');
                label.style.cssText = 'display: flex; align-items: center; cursor: pointer; padding: 5px; border: 1px solid #ccc; border-radius: 4px; background-color: #f9f9f9;';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.value = lettre;
                checkbox.style.marginRight = '5px';
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        lettresInterdites.add(lettre);
                    } else {
                        lettresInterdites.delete(lettre);
                    }
                    afficherDictionnaire();
                });
                
                const span = document.createElement('span');
                span.textContent = lettre;
                span.style.fontWeight = 'bold';
                
                label.appendChild(checkbox);
                label.appendChild(span);
                container.appendChild(label);
            }
        }

        // Fonction pour cr√©er les checkboxes des lettres obligatoires
        function creerCheckboxesLettresObligatoires() {
            const container = document.getElementById('lettresObligatoires');
            const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            
            for (let lettre of alphabet) {
                const label = document.createElement('label');
                label.style.cssText = 'display: flex; align-items: center; cursor: pointer; padding: 5px; border: 1px solid #ccc; border-radius: 4px; background-color: #f9f9f9;';
                
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.value = lettre;
                checkbox.style.marginRight = '5px';
                checkbox.addEventListener('change', function() {
                    if (this.checked) {
                        lettresObligatoires.add(lettre);
                    } else {
                        lettresObligatoires.delete(lettre);
                    }
                    afficherDictionnaire();
                });
                
                const span = document.createElement('span');
                span.textContent = lettre;
                span.style.fontWeight = 'bold';
                
                label.appendChild(checkbox);
                label.appendChild(span);
                container.appendChild(label);
            }
        }

        // Fonction pour afficher le dictionnaire (filtr√© ou complet)
        function afficherDictionnaire() {
            if (dictionnaire.length === 0) {
                document.getElementById('affichageDico').value = 'Dictionnaire non charg√©. Utilisez le bouton ci-dessus pour charger un fichier.';
                document.getElementById('compteurMots').textContent = '';
                return;
            }
            
            let motsAffiches = dictionnaire;
            
            // Filtrer par lettres interdites
            if (lettresInterdites.size > 0) {
                motsAffiches = motsAffiches.filter(mot => {
                    for (let lettre of lettresInterdites) {
                        if (mot.includes(lettre)) {
                            return false;
                        }
                    }
                    return true;
                });
            }
            
            // Filtrer par lettres obligatoires
            if (lettresObligatoires.size > 0) {
                motsAffiches = motsAffiches.filter(mot => {
                    for (let lettre of lettresObligatoires) {
                        if (!mot.includes(lettre)) {
                            return false;
                        }
                    }
                    return true;
                });
            }
            
            // Filtrer par longueur si une longueur est s√©lectionn√©e
            if (longueurDicoSelectionnee > 0) {
                motsAffiches = motsAffiches.filter(mot => mot.length === longueurDicoSelectionnee);
                
                // Filtrer par positions de lettres si des filtres sont d√©finis
                for (let i = 0; i < filtresDico.length; i++) {
                    if (filtresDico[i]) {
                        motsAffiches = motsAffiches.filter(mot => mot[i] === filtresDico[i]);
                    }
                }
            }
            
            document.getElementById('affichageDico').value = motsAffiches.join('\n');
            document.getElementById('compteurMots').textContent = `Nombre de mots : ${motsAffiches.length}`;
        }

        // Fonction pour r√©initialiser les filtres du dictionnaire
        function reinitialiserFiltreDico() {
            document.getElementById('longueurDico').value = '0';
            longueurDicoSelectionnee = 0;
            filtresDico = [];
            document.getElementById('filtreLettresContainer').innerHTML = '';
            
            // D√©cocher toutes les lettres interdites
            lettresInterdites.clear();
            document.querySelectorAll('#lettresInterdites input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            
            // D√©cocher toutes les lettres obligatoires
            lettresObligatoires.clear();
            document.querySelectorAll('#lettresObligatoires input[type="checkbox"]').forEach(cb => {
                cb.checked = false;
            });
            
            afficherDictionnaire();
        }
    </script>
</body>
</html>
